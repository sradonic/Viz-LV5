<!--Z5-2. Proučiti primjere na internetu te omogućiti zoom-in/out ponašanje SVG elementa.-->

<!doctype html>
<html lang="en">
<head>
	
	<style>
	</style>
    <script src="https://d3js.org/d3.v3.min.js"></script>
	<script src="https://d3js.org/topojson.v1.min.js"></script>
</head>
<body>
  <script>
	var width = 960;
	var height = 700;
	var centered;
	
	var projection = d3.geo.mercator()
		.center([0, 10])
		.scale(6000)
		.translate([17600, 4500])
		.rotate([-180, 0]);
		
	var path = d3.geo.path()
		.projection(projection);
		
	var svg = d3.select("body").append("svg")
		.attr("width", width)
		.attr("height", height)
		.style("background", "white");
	
		
	d3.json("cro_regv3.json", function(error, cro) {
	  var data = topojson.feature(cro, cro.objects.layer1);
	  var states = svg.selectAll("path.county")
		.data(data.features)
		.enter()
		.append("path")
		.attr("class", "county")
		.attr("id", function(d) { return d.id; })
		.attr("d", path)
		.style("fill", "red")
		.style("stroke", "gray")
		.style("stroke-width", 1)
		.style("stroke-opacity", 1)	
		.on("click", clicked);		
	});	
	
	function clicked(d) 
	{
		var x, y, k;

		if (d && centered !== d) 
		{
			var centroid = path.centroid(d);
			x = centroid[0];
			y = centroid[1];
			k = 4;
			centered = d;
		} 
		else 
		{
			x = width / 2;
			y = height / 2;
			k = 1;
			centered = null;
		}

		var zoom = svg.selectAll("path.county")
			.classed("active", centered && function(d) { return d === centered; })
			.transition()
			.duration(750)
			.attr("transform", "translate(" + width / 2 + "," + height / 2 + ")scale(" + k + ")translate(" + -x + "," + -y + ")")
			.style("stroke-width", 1.5 / k + "px");
	}
	

    </script>
</body>
</html>
